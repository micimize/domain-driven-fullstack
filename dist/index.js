require("source-map-support").install(),module.exports=function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){e.exports=r(9)},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Domains=n.implementation=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),u=r(3),c=(t(u),r(2)),l=(0,u.extend)({name:"Domain",methods:["withPrefix","withoutPrefix","register","get"]}),p=function(){function e(n){var r=this,t=n.name,a=void 0===t?"":t,s=o(n,["name"]);i(this,e),this.prefix=a,Object.keys(s).forEach(function(e){return r.registerSubdomain({name:e,domain:s[e]})})}return s(e,[{key:"withPrefix",value:function(e){return(""==this.prefix?"":this.prefix+"/")+e}},{key:"withoutPrefix",value:function(e){return e.replace(new RegExp("^"+this.prefix+"/"),"")}},{key:"register",value:function(e,n,r){this[e]=this[e]||{},this[e][n]=r}},{key:"registerSubdomain",value:function(e){var n=this,r=e.name,t=e.domain;"object"!=("undefined"==typeof t?"undefined":a(t))||Array.isArray(t)?this[r]=t:Object.keys(t).forEach(function(e){return n.register(r,e,t[e])})}},{key:"get",value:function(e){return this[e]||{}}}]),e}();n["default"]=p;n.implementation=(0,u.implement)({strictduck:l,withClass:p}),n.Domains=(0,c.typedMap)({name:"Domains",strictduck:p})},function(e,n){e.exports=require("strictduck-control-inverted")},function(e,n){e.exports=require("strictduck")},function(e,n,r){"use strict";function t(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function o(e){var n=(e.parent,e.constructor),r=e.provider,o=e.name,a=t(e,["parent","constructor","provider","name"]);return(0,s.provides)(i({parent:d({name:o+"Dependent",constructor:n}),name:o,provider:r},a))}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};n.implement=o;var a=r(3),s=r(2),u=r(1),c=(0,a.extend)({name:"FullstackPlugin",methods:[]}),l=(0,a.extend)({name:"StorePersistencePlugin",parent:c,methods:[]}),p=(0,a.extend)({name:"DomainDrivenStorePersistencePlugin",parent:l,methods:[]}),d=(0,a.implementable)(s.depends,{parent:p,dependencies:[u.Domains],constructor:function(e){e.Domains;return _}});n["default"]=p},function(e,n,r){"use strict";function t(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function o(e){var n=(e.parent,e.name),r=t(e,["parent","name"]);return(0,s.provides)(i({parent:p(r),name:n},r))}Object.defineProperty(n,"__esModule",{value:!0}),n.DomainDrivenClient=void 0;var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};n.implement=o;var a=r(3),s=r(2),u=r(1),c=(0,a.extend)({name:"Client",methods:[]}),l=n.DomainDrivenClient=(0,a.extend)({name:"DomainDrivenClient",parent:c,methods:[]}),p=(0,a.implementable)(s.depends,{parent:l,dependencies:[u.Domains],constructor:function(e){var n=e.Domains,r=e.client;return r(n)}});n["default"]=l},function(e,n,r){"use strict";function t(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function o(e){var n=e.parent,r=t(e,["parent"]);return(0,s.provides)(i({parent:p(i({parent:n},r))},r))}Object.defineProperty(n,"__esModule",{value:!0}),n.DomainDrivenClientStore=void 0;var i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};n.implement=o;var a=r(3),s=r(2),u=r(1),c=(0,a.extend)({name:"ClientStore",methods:["getState","dispatch","subscribe","replaceReducer"]}),l=n.DomainDrivenClientStore=(0,a.extend)({name:"DomainDrivenClientStore",parent:c,methods:[]}),p=(0,a.implementable)(s.depends,{parent:l,dependencies:[u.Domains]});n["default"]=l},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function i(e){var n=(e.parent,e.constructor),r=e.provider,t=e.name,i=e.url,s=o(e,["parent","constructor","provider","name","url"]);return(0,u.provides)(a({parent:y({name:t+"Dependent",constructor:n}),dependencies:[p["default"]],name:t,provider:r,url:i},s))}Object.defineProperty(n,"__esModule",{value:!0}),n.DomainDrivenServer=void 0;var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};n.implement=i;var s=r(3),u=r(2),c=r(1),l=r(5),p=t(l),d=r(4),f=t(d),v=(0,s.extend)({name:"Server",methods:["use","listen"]}),m=n.DomainDrivenServer=(0,s.extend)({name:"DomainDrivenServer",parent:v,methods:["generateMiddleware"]}),y=(0,s.implementable)(u.depends,{parent:m,dependencies:[c.Domains,f["default"]],constructor:function(e){var n=e.Domains,r=e.server;return r(n)}});n["default"]=m},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var n=0,r=Array(e.length);n<e.length;n++)r[n]=e[n];return r}return Array.from(e)}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function s(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(5),l=r(7),p=r(4),d=t(p),f=r(1),v=function(e){function n(e){var r=e.domains,t=e.server,s=e.client,p=e.persister,v=e.context,m=void 0===v?"NODE":v;i(this,n),u.resolve.satisfies({provider:p,dependency:d["default"]})||(console.log("Persister spec not satisfield by "+(p.name||p.constructor.name)+", dropping optional component from composition"),p=void 0);var y=new f.Domains(r),h={domains:u.resolve.satisfies({provider:y,dependency:f.Domains})&&!0,Server:u.resolve.satisfies({provider:t,dependency:l.DomainDrivenServer})&&!0,Client:u.resolve.satisfies({provider:s,dependency:c.DomainDrivenClient})&&!0};if(Object.keys(h).filter(function(e){return!h[e]}).length)throw TypeError("Fullstack composition requirements not satisfield: \n "+JSON.stringify(h));var b,D="NODE"==m?{Class:l.DomainDrivenServer,method:"provide"}:{Class:c.DomainDrivenClient,method:"provide"},O=a(this,(b=Object.getPrototypeOf(n)).call.apply(b,[this,{main:D},{dependency:f.Domains,provider:y}].concat(o(p?[{dependency:d["default"],provider:p}]:[]),[{dependency:l.DomainDrivenServer,provider:t},{dependency:c.DomainDrivenClient,provider:s}])));return a(O)}return s(n,e),n}(u.Composit);n["default"]=v},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n["default"]=e,n}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=n.storePersistencePlugin=n.Domain=n.clientStore=n.reactiveClient=n.server=void 0;var i=r(7),a=o(i),s=r(10),u=o(s),c=r(6),l=o(c),p=r(1),d=o(p),f=r(4),v=o(f),m=r(8),y=t(m);n.server=a,n.reactiveClient=u,n.clientStore=l,n.Domain=d,n.storePersistencePlugin=v,n["default"]=y["default"]},function(e,n,r){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,n){var r={};for(var t in e)n.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r}function i(e){var n=(e.parent,e.constructor),r=o(e,["parent","constructor"]);return(0,u.provides)(a({parent:m({constructor:n})},r))}Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e};n.implement=i;var s=r(3),u=r(2),c=r(5),l=r(6),p=t(l),d=r(1),f=r(4),v=t(f),m=(0,s.implementable)(u.depends,{name:"DomainDrivenReactiveClient",parent:c.DomainDrivenClient,dependencies:[d.Domains,p["default"],v["default"]]})}]);
//# sourceMappingURL=index.js.map