{"version":3,"sources":["webpack:///webpack/bootstrap 0e66f720bf2e076aa9b3","webpack:///./src/Domain.js","webpack:///external \"strictduck-control-inverted\"","webpack:///external \"strictduck\"","webpack:///./src/domainDrivenStorePersistencePlugin.js","webpack:///./src/client.js","webpack:///./src/clientStore.js","webpack:///./src/server.js","webpack:///./src/fullstack.js","webpack:///./src/index.js","webpack:///./src/reactiveClient.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0e66f720bf2e076aa9b3\n **/","import StrictDuck, { extend, implement, utils } from 'strictduck'\nimport { typedMap, resolve } from 'strictduck-control-inverted'\n\nconst DomainType = extend({\n    name: 'Domain', \n    methods: ['withPrefix', 'withoutPrefix', 'register', 'get']\n})\n\nclass Domain {\n\n    constructor({name=\"\", ...subdomains}) {\n        this.prefix = name\n        Object.keys(subdomains).forEach(\n            subName => this.registerSubdomain({name: subName, domain: subdomains[subName]})\n        )\n    }\n\n    withPrefix(name) {\n        return (this.prefix == \"\" ? \"\" : this.prefix + \"/\") + name\n    }\n\n    withoutPrefix(name) {\n        return name.replace(new RegExp(`^${this.prefix}\\/`),'')\n    }\n\n    register(type, name, value) {\n        this[type] = this[type] || {}\n        this[type][name] = value\n    }\n\n    registerSubdomain({name, domain}) {\n        if(typeof(domain) == 'object' && !Array.isArray(domain)) {\n            Object.keys(domain).forEach(\n                key => this.register(name, key, domain[key])\n            )\n        } else {\n            this[name] = domain\n        }\n    }\n\n    get(type) {\n        return this[type] || {}\n    }\n}\n\nexport default Domain\nexport const implementation = implement({strictduck: DomainType, withClass: Domain})\n\nexport const Domains = typedMap({name: 'Domains', strictduck: implementation})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Domain.js\n **/","module.exports = require(\"strictduck-control-inverted\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"strictduck-control-inverted\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"strictduck\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"strictduck\"\n ** module id = 3\n ** module chunks = 0\n **/","import { extend, implementable } from 'strictduck'\nimport { depends, provides } from 'strictduck-control-inverted'\nimport { Domains } from './Domain'\n\nlet FullstackPlugin = extend({\n    name: 'FullstackPlugin', \n    methods: [],\n})\n\nlet StorePersistencePlugin = extend({\n    name: 'StorePersistencePlugin', \n    parent: FullstackPlugin, \n    methods: [],\n})\n\nlet DomainDrivenStorePersistencePlugin = extend({\n    name: 'DomainDrivenStorePersistencePlugin', \n    parent: StorePersistencePlugin, \n    methods: [/*'middlewareGenerator', 'configure'*/]\n})\n\nlet implementDependent = implementable(\n    depends,\n    {\n        parent: DomainDrivenStorePersistencePlugin,\n        dependencies: [Domains],\n        constructor: ({Domains}) => _\n    }\n)\n\nexport function implement({parent, constructor, provider, name, ...args}){\n    return provides({\n        parent: implementDependent({name: `${name}Dependent`, constructor}),\n        name,\n        provider,\n        ...args\n    })\n}\n\nexport default DomainDrivenStorePersistencePlugin\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/domainDrivenStorePersistencePlugin.js\n **/","import { extend, implementable } from 'strictduck'\nimport { depends, provides } from 'strictduck-control-inverted'\nimport { Domains } from './Domain'\n\nconst Client = extend({\n    name: 'Client', \n    methods: [/*'render'*/],\n})\n\nexport const DomainDrivenClient = extend({\n    name: 'DomainDrivenClient', \n    parent: Client, \n    methods: [/*'generateMiddleware'*/]\n})\n\nconst implementDependent = implementable(\n    depends,\n    {\n        parent: DomainDrivenClient,\n        dependencies: [Domains],\n        constructor: ({Domains, client}) => client(Domains)\n    }\n)\n\nexport function implement({parent, name, ...args}){\n    return provides(\n        {\n            parent: implementDependent(args),\n            name,\n            ...args\n        }\n    )\n}\n\nexport default DomainDrivenClient\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/client.js\n **/","import { extend, implementable } from 'strictduck'\nimport { depends, provides } from 'strictduck-control-inverted'\nimport { Domains } from './Domain'\n\nlet ClientStore = extend({\n    name: 'ClientStore', \n    methods: ['getState', 'dispatch', 'subscribe', 'replaceReducer'],\n})\n\nexport const DomainDrivenClientStore = extend({\n    name: 'DomainDrivenClientStore', \n    parent: ClientStore, \n    methods: [/*'generateMiddleware'*/]\n})\n\nconst implementDependent = implementable(\n    depends,\n    {\n        parent: DomainDrivenClientStore,\n        dependencies: [Domains]\n    }\n)\n\nexport function implement({parent, ...args}){\n    return provides(\n        {\n            parent: implementDependent({parent, ...args}),\n            ...args\n        }\n    )\n}\n\nexport default DomainDrivenClientStore\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/clientStore.js\n **/","import { extend, implementable } from 'strictduck'\nimport { depends, provides } from 'strictduck-control-inverted'\nimport { Domains } from './Domain'\nimport DomainDrivenClient from './client'\nimport DomainDrivenStorePersistencePlugin from './domainDrivenStorePersistencePlugin'\n\nconst Server = extend({\n    name: 'Server', \n    methods: ['use', 'listen'],\n})\n\nexport const DomainDrivenServer = extend({\n    name: 'DomainDrivenServer', \n    parent: Server, \n    methods: ['generateMiddleware']\n})\n\nconst implementDependent = implementable(\n    depends,\n    {\n        parent: DomainDrivenServer,\n        dependencies: [Domains, DomainDrivenStorePersistencePlugin],\n        constructor: ({Domains, server}) => server(Domains)\n    }\n)\n\nexport function implement({parent, constructor, provider, name, url, ...args}){\n    return ( $ES.CONTEXT == 'NODE' ) ?\n        provides(\n            {\n                parent: implementDependent({name: `${name}Dependent`, constructor}),\n                dependencies: [DomainDrivenClient],\n                name,\n                provider,\n                url,\n                ...args\n            }\n        ) : {name, url}\n}\n\nexport default DomainDrivenServer\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server.js\n **/","import { Composit, resolve } from 'strictduck-control-inverted'\nimport {utils} from 'strictduck'\nimport { DomainDrivenClient as Client } from './client'\nimport { DomainDrivenServer as Server } from './server'\nimport Persister from './domainDrivenStorePersistencePlugin'\nimport { Domains } from './Domain'\n\nexport default class Fullstack extends Composit {\n    constructor({ domains: domainsObj, server, client, persister, context = 'NODE' }){\n\n        if(!resolve.satisfies({ provider: persister, dependency: Persister })){\n            console.log(`Persister spec not satisfield by ${persister.name || persister.constructor.name}, dropping optional component from composition`)\n            persister = undefined\n        }\n\n        let domains = new Domains(domainsObj);\n\n        let satisfied = {\n            domains: resolve.satisfies({ provider: domains, dependency: Domains }) && true,\n            Server : resolve.satisfies({ provider:  server, dependency: Server  }) && true,\n            Client : resolve.satisfies({ provider:  client, dependency: Client  }) && true\n        } \n\n        if(!Object.keys(satisfied).filter(v => !satisfied[v]).length) {\n\n            let main = ( context == 'NODE' ) ?\n                { Class: Server, method: 'provide' } :\n                { Class: Client, method: 'provide' }\n\n            super(\n                { main },\n                {dependency: Domains, provider: domains},\n                ...(persister ? [{dependency: Persister, provider: persister}] : []),\n                {dependency: Server, provider: server},\n                {dependency: Client, provider: client}\n            )\n        } else {\n            throw TypeError(`Fullstack composition requirements not satisfield: \\n ${JSON.stringify(satisfied)}`)\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fullstack.js\n **/","export * as server from './server'\nexport * as reactiveClient from './reactiveClient'\nexport * as clientStore from './clientStore'\nexport * as Domain from './Domain'\n\nexport * as storePersistencePlugin from './domainDrivenStorePersistencePlugin'\n\nexport default from './fullstack'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import { extend, implementable } from 'strictduck'\nimport { depends, provides } from 'strictduck-control-inverted'\nimport { DomainDrivenClient } from './client'\nimport Store from './clientStore'\nimport { Domains } from './Domain'\nimport DomainDrivenStorePersistencePlugin from './domainDrivenStorePersistencePlugin'\n\nconst implementDependent = implementable(\n    depends,\n    {\n        name: 'DomainDrivenReactiveClient',\n        parent: DomainDrivenClient,\n        dependencies: [Domains, Store, DomainDrivenStorePersistencePlugin]\n    }\n)\n\nexport function implement({parent, constructor, ...args}){\n    return provides(\n        {\n            parent: implementDependent({constructor}),\n            ...args\n        }\n    )\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reactiveClient.js\n **/"],"sourceRoot":""}